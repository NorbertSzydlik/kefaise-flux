Lightweight implementation of flux pattern
